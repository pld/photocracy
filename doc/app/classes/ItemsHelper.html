<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: ItemsHelper</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">ItemsHelper</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/app/helpers/items_helper_rb.html">
                app/helpers/items_helper.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000211">country_select_tag</a>&nbsp;&nbsp;
      <a href="#M000218">fast_link_to_item</a>&nbsp;&nbsp;
      <a href="#M000225">google_item_chart</a>&nbsp;&nbsp;
      <a href="#M000226">google_map_votes</a>&nbsp;&nbsp;
      <a href="#M000217">item_display</a>&nbsp;&nbsp;
      <a href="#M000219">link_to_item</a>&nbsp;&nbsp;
      <a href="#M000215">order_link</a>&nbsp;&nbsp;
      <a href="#M000214">order_options</a>&nbsp;&nbsp;
      <a href="#M000222">pic_for_country</a>&nbsp;&nbsp;
      <a href="#M000212">question_select_tag</a>&nbsp;&nbsp;
      <a href="#M000224">ratings</a>&nbsp;&nbsp;
      <a href="#M000213">sort_select_tag</a>&nbsp;&nbsp;
      <a href="#M000220">type_instructions</a>&nbsp;&nbsp;
      <a href="#M000221">type_style</a>&nbsp;&nbsp;
      <a href="#M000216">upload_links</a>&nbsp;&nbsp;
      <a href="#M000223">wins</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000211" class="method-detail">
        <a name="M000211"></a>

        <div class="method-heading">
          <a href="#M000211" class="method-signature">
          <span class="method-name">country_select_tag</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000211-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000211-source">
<pre>
   <span class="ruby-comment cmt"># File app/helpers/items_helper.rb, line 2</span>
2:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">country_select_tag</span>
3:       <span class="ruby-identifier">select_tag</span> <span class="ruby-value str">'country'</span>, <span class="ruby-identifier">countries</span>, <span class="ruby-identifier">:onchange</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;Back.no();Message.notify('#{t('actions.loading')}');#{remote_function(:url =&gt; { :action =&gt; :country }, :with =&gt; &quot;#{question_with}+#{option_with_('country', '&amp;')}&quot;)}&quot;</span>
4:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000218" class="method-detail">
        <a name="M000218"></a>

        <div class="method-heading">
          <a href="#M000218" class="method-signature">
          <span class="method-name">fast_link_to_item</span><span class="method-args">(image_name, item_id, width)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000218-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000218-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/items_helper.rb, line 45</span>
45:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fast_link_to_item</span>(<span class="ruby-identifier">image_name</span>, <span class="ruby-identifier">item_id</span>, <span class="ruby-identifier">width</span>)
46:     <span class="ruby-identifier">fast_link</span>(<span class="ruby-identifier">rounded</span>(<span class="ruby-identifier">image_tag</span>(<span class="ruby-identifier">image_name</span>, {<span class="ruby-identifier">:width</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">width</span>, <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>})), <span class="ruby-node">&quot;items/#{item_id}&quot;</span>)
47:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000225" class="method-detail">
        <a name="M000225"></a>

        <div class="method-heading">
          <a href="#M000225" class="method-signature">
          <span class="method-name">google_item_chart</span><span class="method-args">(item, question)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000225-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000225-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/items_helper.rb, line 78</span>
78:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">google_item_chart</span>(<span class="ruby-identifier">item</span>, <span class="ruby-identifier">question</span>)
79:     <span class="ruby-identifier">percents</span> = []
80:     <span class="ruby-identifier">country_names</span> = <span class="ruby-ivar">@groups</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">group</span><span class="ruby-operator">|</span>
81:       <span class="ruby-identifier">stat</span> = <span class="ruby-constant">Stat</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">item</span>, <span class="ruby-identifier">group</span>, <span class="ruby-identifier">question</span>)
82:       <span class="ruby-identifier">percents</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">stat</span>.<span class="ruby-identifier">win_percent</span>.<span class="ruby-identifier">to_i</span>
83:       <span class="ruby-node">&quot;#{group.name} (#{stat.ratings})&quot;</span>
84:     <span class="ruby-keyword kw">end</span>
85:     <span class="ruby-identifier">country_names</span>.<span class="ruby-identifier">unshift</span>(<span class="ruby-node">&quot;All (#{item.ratings(question.id)})&quot;</span>)
86:     <span class="ruby-identifier">title</span> = <span class="ruby-identifier">question</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">strip_tags</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">' '</span>, <span class="ruby-value str">'+'</span>)
87:     <span class="ruby-identifier">percents</span>.<span class="ruby-identifier">unshift</span>(<span class="ruby-identifier">item</span>.<span class="ruby-identifier">win_percent</span>(<span class="ruby-identifier">question</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">to_i</span>)
88:     <span class="ruby-identifier">image_tag</span>(<span class="ruby-node">&quot;http://chart.apis.google.com/chart?cht=bvs&amp;chbh=60,40,10&amp;chtt=#{title}&amp;chxt=y&amp;chd=t:#{percents.join(',')}&amp;chs=420x300&amp;chl=#{country_names.join('|')}&quot;</span>)
89:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000226" class="method-detail">
        <a name="M000226"></a>

        <div class="method-heading">
          <a href="#M000226" class="method-signature">
          <span class="method-name">google_map_votes</span><span class="method-args">(item, question_id = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000226-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000226-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/items_helper.rb, line 91</span>
 91:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">google_map_votes</span>(<span class="ruby-identifier">item</span>, <span class="ruby-identifier">question_id</span> = <span class="ruby-keyword kw">nil</span>)
 92:     <span class="ruby-identifier">wins</span>, <span class="ruby-identifier">losses</span> = [], []
 93:     <span class="ruby-identifier">options</span> = {
 94:       <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;items_responses.item_id, responses.visit_id, ip_latitude, ip_longitude&quot;</span>,
 95:       <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:active</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> },
 96:       <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;INNER JOIN visits ON (visits.id=responses.visit_id) INNER JOIN items_responses ON (items_responses.response_id=responses.id) INNER JOIN items_prompts ON (items_prompts.item_id=#{item.id} AND responses.prompt_id=items_prompts.prompt_id)&quot;</span>
 97:     }
 98:     <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:joins</span>] <span class="ruby-operator">+=</span> <span class="ruby-node">&quot; INNER JOIN prompts ON (responses.prompt_id=prompts.id AND prompts.question_id=#{question_id})&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">question_id</span>
 99:     <span class="ruby-constant">Response</span>.<span class="ruby-identifier">all</span>(<span class="ruby-identifier">options</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">response</span><span class="ruby-operator">|</span>
100:       <span class="ruby-identifier">geo</span> = [<span class="ruby-identifier">response</span>.<span class="ruby-identifier">ip_latitude</span>, <span class="ruby-identifier">response</span>.<span class="ruby-identifier">ip_longitude</span>]
101:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">geo</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">pos</span><span class="ruby-operator">|</span> <span class="ruby-identifier">pos</span>.<span class="ruby-identifier">nil?</span> }
102:         <span class="ruby-identifier">geo</span> = <span class="ruby-identifier">geo</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">','</span>)
103:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">response</span>.<span class="ruby-identifier">item_id</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">id</span>
104:           <span class="ruby-identifier">wins</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">geo</span>
105:         <span class="ruby-keyword kw">else</span>
106:           <span class="ruby-identifier">losses</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">geo</span>
107:         <span class="ruby-keyword kw">end</span>
108:       <span class="ruby-keyword kw">end</span>
109:     <span class="ruby-keyword kw">end</span>
110:     <span class="ruby-identifier">wins</span> = <span class="ruby-identifier">wins</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-node">&quot;[#{wins.join('],[')}]&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">''</span>
111:     <span class="ruby-identifier">losses</span> = <span class="ruby-identifier">losses</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-node">&quot;[#{losses.join('],[')}]&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">''</span>
112:     <span class="ruby-identifier">javascript_tag</span>(<span class="ruby-node">&quot;
113:       Google.map([#{wins}], [#{losses}], 'world_map');
114:       Google.map([#{wins}], [#{losses}], 'asia_map', [38,105, 3]);
115:       Google.map([#{wins}], [#{losses}], 'us_map', [42,-90, 3]);
116:     &quot;</span>)
117:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000217" class="method-detail">
        <a name="M000217"></a>

        <div class="method-heading">
          <a href="#M000217" class="method-signature">
          <span class="method-name">item_display</span><span class="method-args">(item, thumb = :compare, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000217-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000217-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/items_helper.rb, line 33</span>
33:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">item_display</span>(<span class="ruby-identifier">item</span>, <span class="ruby-identifier">thumb</span> = <span class="ruby-identifier">:compare</span>, <span class="ruby-identifier">options</span> = {})
34:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">item</span>
35:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">thumb</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:thumb</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:height</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">attachment</span>
36:       <span class="ruby-identifier">img</span> = <span class="ruby-identifier">item</span>.<span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">thumbnails</span>.<span class="ruby-identifier">find_by_thumbnail</span>(<span class="ruby-value str">'thumb'</span>)
37:       <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:height</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">img</span>.<span class="ruby-identifier">height</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:height</span>]
38:     <span class="ruby-keyword kw">end</span>
39:     <span class="ruby-identifier">path</span> = <span class="ruby-identifier">item</span>.<span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">public_filename</span>(<span class="ruby-identifier">thumb</span>)
40:     <span class="ruby-comment cmt"># we sometime get a bad path, fix it</span>
41:     <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>[<span class="ruby-identifier">path</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\/system/</span>, <span class="ruby-identifier">path</span>.<span class="ruby-identifier">length</span>] <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">path</span>[<span class="ruby-value">0</span>,<span class="ruby-value">7</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;/system&quot;</span>
42:     <span class="ruby-identifier">item</span>.<span class="ruby-identifier">attachment</span> <span class="ruby-value">? </span><span class="ruby-identifier">image_tag</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>)) <span class="ruby-operator">:</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">description</span>
43:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000219" class="method-detail">
        <a name="M000219"></a>

        <div class="method-heading">
          <a href="#M000219" class="method-signature">
          <span class="method-name">link_to_item</span><span class="method-args">(item, size = :thumb, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000219-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000219-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/items_helper.rb, line 49</span>
49:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">link_to_item</span>(<span class="ruby-identifier">item</span>, <span class="ruby-identifier">size</span> = <span class="ruby-identifier">:thumb</span>, <span class="ruby-identifier">options</span> = {})
50:     <span class="ruby-identifier">link_to</span>(<span class="ruby-identifier">rounded</span>(<span class="ruby-identifier">item_display</span>(<span class="ruby-identifier">item</span>, <span class="ruby-identifier">size</span>, <span class="ruby-identifier">options</span>)), <span class="ruby-identifier">item</span>)
51:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000215" class="method-detail">
        <a name="M000215"></a>

        <div class="method-heading">
          <a href="#M000215" class="method-signature">
          <span class="method-name">order_link</span><span class="method-args">(type, question_id, name = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000215-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000215-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/items_helper.rb, line 21</span>
21:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">order_link</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">question_id</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>)
22:     <span class="ruby-identifier">active</span> = <span class="ruby-value str">' active'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'rank'</span>
23:     <span class="ruby-identifier">link_to_remote</span>(<span class="ruby-identifier">name</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">t</span>(<span class="ruby-node">&quot;items.order.#{type}&quot;</span>), <span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:list</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">type</span> }, <span class="ruby-identifier">:with</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">question_with</span>, <span class="ruby-identifier">:html</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{type}_#{question_id}&quot;</span>, <span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;order#{active}&quot;</span> })
24:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000214" class="method-detail">
        <a name="M000214"></a>

        <div class="method-heading">
          <a href="#M000214" class="method-signature">
          <span class="method-name">order_options</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000214-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000214-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/items_helper.rb, line 14</span>
14:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">order_options</span>
15:     <span class="ruby-identifier">options_for_select</span>([ [<span class="ruby-identifier">t</span>(<span class="ruby-value str">'items.order.date'</span>), <span class="ruby-value str">'new'</span>],
16:       [<span class="ruby-identifier">t</span>(<span class="ruby-value str">'items.order.score'</span>), <span class="ruby-value str">'score'</span>],
17:       [<span class="ruby-identifier">t</span>(<span class="ruby-value str">'items.order.percent'</span>), <span class="ruby-value str">'percent'</span>]
18:     ], <span class="ruby-value str">'percent'</span>)
19:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000222" class="method-detail">
        <a name="M000222"></a>

        <div class="method-heading">
          <a href="#M000222" class="method-signature">
          <span class="method-name">pic_for_country</span><span class="method-args">(country_code)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000222-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000222-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/items_helper.rb, line 61</span>
61:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pic_for_country</span>(<span class="ruby-identifier">country_code</span>)
62:     <span class="ruby-identifier">image_tag</span>((<span class="ruby-identifier">country_code</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">country_code</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-node">&quot;#{country_code.downcase}.jpg&quot;</span>) <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;world.jpg&quot;</span>)
63:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000212" class="method-detail">
        <a name="M000212"></a>

        <div class="method-heading">
          <a href="#M000212" class="method-signature">
          <span class="method-name">question_select_tag</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000212-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000212-source">
<pre>
   <span class="ruby-comment cmt"># File app/helpers/items_helper.rb, line 6</span>
6:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">question_select_tag</span>
7:     <span class="ruby-identifier">select_tag</span> <span class="ruby-value str">'question'</span>, <span class="ruby-identifier">options_for_select</span>(<span class="ruby-identifier">groups_for_select</span>, <span class="ruby-ivar">@active_question_id</span>), <span class="ruby-identifier">:onchange</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Back.no();$('.question').each(function(el) { $(this).hide() });$('#items_' + this.value).show();&quot;</span>
8:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000224" class="method-detail">
        <a name="M000224"></a>

        <div class="method-heading">
          <a href="#M000224" class="method-signature">
          <span class="method-name">ratings</span><span class="method-args">(item, question)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000224-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000224-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/items_helper.rb, line 69</span>
69:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ratings</span>(<span class="ruby-identifier">item</span>, <span class="ruby-identifier">question</span>)
70:     <span class="ruby-keyword kw">if</span> (<span class="ruby-ivar">@country_code</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@country_code</span>.<span class="ruby-identifier">empty?</span>)
71:       <span class="ruby-identifier">item</span>.<span class="ruby-identifier">ratings_for_country</span>(<span class="ruby-ivar">@country_code</span>, <span class="ruby-identifier">question</span>.<span class="ruby-identifier">id</span>, <span class="ruby-keyword kw">false</span>)
72:     <span class="ruby-keyword kw">else</span>
73:       <span class="ruby-identifier">iq</span> = <span class="ruby-identifier">item</span>.<span class="ruby-identifier">items_questions</span>.<span class="ruby-identifier">find_by_question_id</span>(<span class="ruby-identifier">question</span>.<span class="ruby-identifier">id</span>)
74:       <span class="ruby-identifier">iq</span>.<span class="ruby-identifier">wins</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">iq</span>.<span class="ruby-identifier">losses</span>
75:     <span class="ruby-keyword kw">end</span>
76:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000213" class="method-detail">
        <a name="M000213"></a>

        <div class="method-heading">
          <a href="#M000213" class="method-signature">
          <span class="method-name">sort_select_tag</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000213-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000213-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/items_helper.rb, line 10</span>
10:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sort_select_tag</span>
11:     <span class="ruby-identifier">select_tag</span> <span class="ruby-value str">'sort'</span>, <span class="ruby-identifier">order_options</span>, <span class="ruby-identifier">:onchange</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">remote_function</span>(<span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:list</span> }, <span class="ruby-identifier">:with</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{question_with}+#{option_with_('sort', '&amp;')}&quot;</span>)
12:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000220" class="method-detail">
        <a name="M000220"></a>

        <div class="method-heading">
          <a href="#M000220" class="method-signature">
          <span class="method-name">type_instructions</span><span class="method-args">(type)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000220-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000220-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/items_helper.rb, line 53</span>
53:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">type_instructions</span>(<span class="ruby-identifier">type</span>)
54:     <span class="ruby-identifier">t</span>(<span class="ruby-node">&quot;item.submit.instructions.#{type}&quot;</span>)
55:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000221" class="method-detail">
        <a name="M000221"></a>

        <div class="method-heading">
          <a href="#M000221" class="method-signature">
          <span class="method-name">type_style</span><span class="method-args">(type)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000221-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000221-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/items_helper.rb, line 57</span>
57:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">type_style</span>(<span class="ruby-identifier">type</span>)
58:     <span class="ruby-ivar">@item_type</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-value str">'display:none'</span>
59:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000216" class="method-detail">
        <a name="M000216"></a>

        <div class="method-heading">
          <a href="#M000216" class="method-signature">
          <span class="method-name">upload_links</span><span class="method-args">(type)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000216-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000216-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/items_helper.rb, line 26</span>
26:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">upload_links</span>(<span class="ruby-identifier">type</span>)
27:     [<span class="ruby-value str">'upload'</span>, <span class="ruby-value str">'flickr'</span>, <span class="ruby-value str">'url'</span>].<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">el</span><span class="ruby-operator">|</span>
28:       <span class="ruby-identifier">options</span> = <span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">el</span> <span class="ruby-value">? </span>{ <span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'active'</span> } <span class="ruby-operator">:</span> {}
29:       <span class="ruby-identifier">build_upload_link</span>(<span class="ruby-identifier">el</span>, <span class="ruby-identifier">options</span>)
30:     <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' '</span>)
31:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000223" class="method-detail">
        <a name="M000223"></a>

        <div class="method-heading">
          <a href="#M000223" class="method-signature">
          <span class="method-name">wins</span><span class="method-args">(item, question)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000223-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000223-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/items_helper.rb, line 65</span>
65:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">wins</span>(<span class="ruby-identifier">item</span>, <span class="ruby-identifier">question</span>)
66:     (<span class="ruby-ivar">@country_code</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@country_code</span>.<span class="ruby-identifier">empty?</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">wins_for_country</span>(<span class="ruby-ivar">@country_code</span>, <span class="ruby-identifier">question_id</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">items_questions</span>.<span class="ruby-identifier">find_by_question_id</span>(<span class="ruby-identifier">question</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">wins</span>
67:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>